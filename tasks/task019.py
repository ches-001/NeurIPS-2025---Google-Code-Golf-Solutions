def p(d):F=lambda d,t=3,E=enumerate:-t*d or F([*zip(*[[[c,8][i>0<j>0<8!=d[i-1][j-1]>0==c]for j,c in E(r)]for i,r in E(d)][::-1])],t-1);return F([r*2 for r in d]*2)