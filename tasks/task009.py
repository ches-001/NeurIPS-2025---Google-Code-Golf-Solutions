def p(d):R=range;L=len;M=L(d);N=L(d[0]);C=[(d[r][c],r,c)for r in R(M)for c in R(N)if d[r][c]not in [0,d[0][2]]];D=lambda a,b:(min(a,b),max(a,b));F=lambda i,j,c:[(d[3*i+y].__setitem__(3*j+x,c))for y in R(2)for x in R(2)];[((p:=D(u[2],v[2]),f:=p[0]//3,g:=p[1]//3,[F(u[1]//3,i,u[0])for i in R(f,g)])if u[1]==v[1]else((p:=D(u[1],v[1]),f:=p[0]//3,g:=p[1]//3,[F(i,u[2]//3,u[0])for i in R(f,g)])if u[2]==v[2]else ()))for u in C for v in C if u!=v and u[0]==v[0]];return d